# Описание проекта

## Вариант 8: Платформа для онлайн-курсов

Проект по созданию серверной части веб-приложения: "Платформа для онлайн-курсов".

## Основной функционал

### Курсы

Преподаватели могут просматривать, создавать, изменять и удалять курсы.

Студенты покупают курсы, могут отмечать прохождение уроков этого курса и смотреть прогрессию.

Курсы разделены по сложностям и категориям.

### Уроки

Уроки создают преподаватели. Они могут просматривать, создавать, изменять и удалять уроки своих курсов.

Студенты могут просматривать и отмечать пройденые уроки.

### Роли

Доступы к определенному функционалу разграничены ролями:
- Студент;
- Преподаватель;
- Админ.

### Скидки

Если студент проходит курс ему предоставляется скидка:
- 10% - Если пойден 1 курс;
- 20% - Если пройдено 2 курса;
- 30% - Если пройдено более 3-х курсов.

### Аутентификация

Аутентификация пользователей происходит с помощью JWT-токена.

### Логирование

Логирование осуществляется со всеми запросами не являющимеся GET-запросами. Все логи храняться в файле `log.txt`.


# Технологии
Язык программирования: **Python 3.12.2**

База данных: **SQLite**

Список библиотек:
- fastapi[standard]==0.115.12
- sqlalchemy==2.0.41
- pydantic-settings==2.9.1
- PyJWT==2.10.1
- passlib[bcrypt]==1.7.4

# Инструкция к запуску

- Изменить название файла ".env_template" на ".env"
- Заполнить поля в ".env"
<details>
<summary>Windows</summary>
Команды запуска в терминале:<br>

### Установка локального окружения
```bash
py -m venv .venv
```
### Активация локального окружения
```bash
.venv/Scripts/activate
```
### Установка библиотек
```bash
pip install -r requirements.txt
```
### Посев
```bash
py seed.py
```
### Запуск сервера API
```bash
fastapi dev main.py
```
</details>
<details>
<summary>Linux</summary>
Команды запуска в терминале:<br>

### Установка локального окружения
```bash
python -m venv .venv
```
### Активация локального окружения
```bash
source venv/bin/activate
```
### Установка библиотек
```bash
pip install -r requirements.txt
```
### Посев
```bash
python seed.py
```
### Запуск сервера API
```bash
fastapi dev main.py
```
</details>

# Описание API

Методология: REST API<br>
Способ передачи данных: HTTP<br>
Документация доступна по ссылке после запуска: http://127.0.0.1:8000/docs

# Описание валидации к ключевым эндпоинтам

### Основной эндпоинт

`GET /api/courses/?page=1&limit=3&category=ИТ&level=Легко`

- page - страница ответа (работает только с limit);
- limit - ограничение ответа;
- category - категория курса;
- level - уровень сложности курса.

### Загрузка видео к уроку

`PUT /api/lessons/{lesson_id}/video/`

- lesson_id - id урока.

BODY: видео формата mp4.

### Вход

`POST /api/users/login/`

BODY:
```json
{
  "email": "example@mail.com", - почта
  "password": "examplepass" - сложный пароль
}
```

### Регистрация

`POST /api/users/`

BODY:
```json
{
  "surname": "Иванов", - фамилия
  "name": "Иван", - имя
  "email": "example@mail.com", - почта
  "password": "examplepass", - сложный пароль
  "role_id": 1 - роль (1: студент, 2:преподаватель, 3: админ)
}
```

### Прохождение урока

`POST /api/completedlessons/`

BODY:
```json
{
  "lesson_id": 1, - id урока доступного кусра
  "user_id": 1 - свой id пользователя
}
```

### Запись на курс

`POST /api/coursesrecords/`

BODY:
```json
{
  "user_id": 1, - свой id пользователя
  "course_id": 1 - id курса
}
```

# Описание ролей пользователей и их прав

## Студент
Может смотреть/записываться на курсы и проходить уроки.
<details><summary>Данные для входа</summary>Почта: alexey.petrov@mail.com Пароль: QWErty123#</details>

## Преподаватель
Создает/редактирует курсы и уроки.
<details><summary>Данные для входа</summary>Почта: olga.vasilyeva@yandex.ru Пароль: QWErty123#</details>

## Админ
Управляет всеми сущностями в API.
<details><summary>Данные для входа</summary>Почта: ekaterina.sokolovskaya@gmail.com Пароль: QWErty123#</details>

# Контакты
<details><summary>Почта</summary>andreq308979@gmail.com</details>